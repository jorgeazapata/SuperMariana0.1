<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dino Jump Fix</title>
    <style>
        body { 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background-color: #f0f0f0; 
            font-family: Arial, sans-serif; 
        }
        #game { 
            width: 600px; 
            height: 200px; 
            border-bottom: 2px solid #535353; 
            position: relative; 
            background: white; 
            overflow: hidden;
        }
        #dino { 
            width: 40px; 
            height: 40px; 
            background-color: #535353; 
            position: absolute; 
            bottom: 0; 
            left: 50px; 
        }
        #cactus { 
            width: 20px; 
            height: 40px; 
            background-color: #ff4d4d; 
            position: absolute; 
            bottom: 0; 
            left: 580px; /* Posición inicial */
            animation: move 1.5s infinite linear; /* Movimiento constante */
        }
        .animate-jump { animation: jump 0.5s linear; }
        
        @keyframes jump {
            0% { bottom: 0; }
            30% { bottom: 100px; }
            70% { bottom: 100px; }
            100% { bottom: 0; }
        }
        @keyframes move {
            0% { left: 600px; }
            100% { left: -20px; }
        }
        #score { position: absolute; top: 10px; right: 20px; color: #535353; font-size: 18px; }
    </style>
</head>
<body onkeydown="if(event.code==='Space') jump()" onclick="jump()">

    <div id="game">
        <div id="score">Puntos: 0</div>
        <div id="dino"></div>
        <div id="cactus"></div>
    </div>

    <script>
        const dino = document.getElementById("dino");
        const cactus = document.getElementById("cactus");
        const scoreElement = document.getElementById("score");
        let score = 0;

        function jump() {
            if (!dino.classList.contains("animate-jump")) {
                dino.classList.add("animate-jump");
                setTimeout(() => {
                    dino.classList.remove("animate-jump");
                }, 500);
            }
        }

        setInterval(() => {
            // Obtenemos posiciones actuales
            let dinoBottom = parseInt(window.getComputedStyle(dino).getPropertyValue("bottom"));
            let cactusLeft = parseInt(window.getComputedStyle(cactus).getPropertyValue("left"));

            // Detección de colisión (Ajustada)
            if (cactusLeft < 90 && cactusLeft > 50 && dinoBottom <= 40) {
                alert("¡Game Over! Puntos: " + Math.floor(score/10));
                score = 0;
                location.reload();
            } else {
                score++;
                scoreElement.innerHTML = "Puntos: " + Math.floor(score/10);
            }
        }, 10);
    </script>
</body>
</html>
